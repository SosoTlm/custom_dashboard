<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- Google Analytics (exemple) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXX-Y"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-XXXXX-Y'); // Remplacez UA-XXXXX-Y par votre identifiant de suivi Google Analytics
</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SosoWord - Home</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1e1e2e;
            color: #f5f5fa;
            text-align: center;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        h1 {
            color: #ffd700;
            font-size: 3em;
            margin-bottom: 20px;
        }

        button {
            background-color: #ffd700;
            border: none;
            padding: 15px 30px;
            color: #1e1e2e;
            font-size: 1em;
            cursor: pointer;
            margin: 10px;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #ffc107;
        }

        #game, #input-word, #admin-panel {
            display: none;
            text-align: left;
            background-color: #2e2e3e;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
        }

        #word {
            font-size: 2em;
            margin: 20px 0;
            letter-spacing: 5px;
        }

        #message {
            color: red;
            margin-top: 10px;
            font-weight: bold;
        }

        #message.success {
            color: green;
        }

        input[type="text"], input[type="password"] {
            padding: 10px;
            border: 2px solid #ffd700;
            border-radius: 5px;
            width: calc(100% - 22px);
            font-size: 1em;
            color: #1e1e2e;
            margin-bottom: 10px;
        }

        #menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #2e2e3e;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
        }

        #admin-login {
            display: none;
            text-align: left;
            background-color: #2e2e3e;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            margin: 10px;
        }

        .fade-in {
            animation: fadeIn 1s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        #cookieConsent {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #333;
            color: white;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }
        #cookieConsent button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
  <div id="cookieConsent">
    Ce site utilise des cookies pour améliorer votre expérience. Sélectionnez les types de cookies que vous acceptez :
    <br>
    <label><input type="checkbox" id="essentialCookies" checked disabled> Cookies essentiels (obligatoires)</label><br>
    
    <label><input type="checkbox" id="analyticsCookies"> Cookies d'analyse</label><br>
    <label><input type="checkbox" id="userTrackingCookies"> Cookies de suivi des utilisateurs</label><br>
    
    <label><input type="checkbox" id="adsCookies"> Cookies publicitaires</label><br>
    <label><input type="checkbox" id="socialMediaCookies"> Cookies de réseaux sociaux</label><br>
    
    <button id="acceptSelectedCookies">J'accepte les sélectionnés</button>
</div>

    <h1>SosoWord</h1>

    <div id="menu" class="fade-in">
        <button onclick="startGame('practice')">Entrainement</button>
        <button onclick="startGame('2player')">2 Joueurs</button>
        <button onclick="showAdminPanel()">Admin</button>
    </div>

    <div id="input-word">
        <h3>Vous êtes le Joueur 1</h3>
        <p>Entrez un mot pour que le joueur 2 le devine</p>
        <input type="text" id="playerWord" placeholder="Ecris ici" maxlength="15">
        <button onclick="submitWord()">Soumettre</button>
    </div>

    <div id="game">
        <h2>Jeu en cours...</h2>
        <h3>Joueur 2 devine !</h3>
        <p id="word"></p>
        <input type="text" id="input" placeholder="Ecris la lettre" maxlength="1">
        <button onclick="guess()">Soumettre</button>
        <p id="message"></p>
    </div>

    <div id="admin-login">
        <h3>Admin Login</h3>
        <button onclick="RefreshBack()">Retour</button>
        <input type="password" id="admin-password" placeholder="Entrez le mot de passe">
        <button onclick="checkAdminPassword()">Accéder</button>
        <p id="admin-message"></p>
    </div>

    <div id="admin-panel">
        <h2>Panneau d'administration</h2>
        <p>Bienvenue dans le panneau d'administration.</p>
        <button onclick="stopGame()">Arrêter la partie en cours</button>
        <p id="current-game"></p>
        <p id="admin-message"></p>
        <!-- Ajoutez ici d'autres fonctionnalités d'administration si nécessaire -->
    </div>

    <script>
        let words = ["chat", "chien", "oiseau", "souris", "cheval"];
        let selectedWord;
        let guessedWord;
        let attempts;
        let mode;
        let gameActive = false;

        function startGame(selectedMode) {
            mode = selectedMode;
            document.getElementById('menu').style.display = 'none';
            gameActive = true;

            if (mode === 'practice') {
                selectedWord = words[Math.floor(Math.random() * words.length)];
                initializeGame();
            } else if (mode === '2player') {
                document.getElementById('input-word').style.display = 'block';
            }
            document.getElementById('current-game').innerText = `Mode: ${mode}, Mot: ${selectedWord}`;
        }

        function submitWord() {
            selectedWord = document.getElementById('playerWord').value.toLowerCase();
            if (selectedWord) {
                document.getElementById('input-word').style.display = 'none';
                initializeGame();
            }
            document.getElementById('current-game').innerText = `Mode: ${mode}, Mot: ${selectedWord}`;
        }

        function initializeGame() {
            guessedWord = "_".repeat(selectedWord.length);
            attempts = 10;
            document.getElementById('word').innerText = guessedWord;
            document.getElementById('game').style.display = 'block';
        }

        function guess() {
            const input = document.getElementById('input').value.toLowerCase();
            let newGuessedWord = "";

            for (let i = 0; i < selectedWord.length; i++) {
                if (input === selectedWord[i]) {
                    newGuessedWord += input;
                } else {
                    newGuessedWord += guessedWord[i];
                }
            }

            guessedWord = newGuessedWord;
            document.getElementById('word').innerText = guessedWord;

            if (!selectedWord.includes(input)) {
                attempts--;
                document.getElementById('message').innerText = `Lettre incorrecte! Il vous reste ${attempts} essais.`;
            } else {
                document.getElementById('message').innerText = "";
            }

            if (guessedWord === selectedWord) {
                document.getElementById('message').innerText = "Félicitations ! Vous avez trouvé le mot, recommençons.";
                document.getElementById('message').classList.add('success');
                setTimeout(() => location.reload(), 2000);
            }

            if (attempts === 0) {
                document.getElementById('message').innerText = `Perdu! Le mot était "${selectedWord}", recommençons.`;
                setTimeout(() => location.reload(), 2000);
            }

            document.getElementById('input').value = "";
        }

        function showAdminPanel() {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('admin-login').style.display = 'block';
        }

        function checkAdminPassword() {
            const password = document.getElementById('admin-password').value;
            if (password === 'nitogxx') {
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
            } else {
                document.getElementById('admin-message').innerText = 'Mot de passe incorrect.';
                document.getElementById('admin-message').style.color = 'red';
            }
        }

        function stopGame() {
            if (gameActive) {
                document.getElementById('game').innerHTML = `
                    <h2>Partie Arrêtée !</h2>
                    <h3>Un admin a arrêté la partie !</h3>
                `;
                gameActive = false;
            } else {
                document.getElementById('admin-message').innerText = 'Aucune partie en cours à arrêter.';
                document.getElementById('admin-message').style.color = 'red';
            }
        }
        
       document.addEventListener("DOMContentLoaded", function () {
    var cookieConsent = document.getElementById('cookieConsent');
    var acceptSelectedCookies = document.getElementById('acceptSelectedCookies');

    if (!localStorage.getItem('cookiesPreferences')) {
        cookieConsent.style.display = 'block';
    }

    acceptSelectedCookies.addEventListener('click', function () {
        var preferences = {
            essential: true, // Obligatoire et toujours accepté
            performance: {
                analytics: document.getElementById('analyticsCookies').checked,
                userTracking: document.getElementById('userTrackingCookies').checked
            },
            targeting: {
                ads: document.getElementById('adsCookies').checked,
                socialMedia: document.getElementById('socialMediaCookies').checked
            }
        };

        localStorage.setItem('cookiesPreferences', JSON.stringify(preferences));
        cookieConsent.style.display = 'none';
    });
});

var userPreferences = JSON.parse(localStorage.getItem('cookiesPreferences'));

document.addEventListener("DOMContentLoaded", function () {
    var userPreferences = JSON.parse(localStorage.getItem('cookiesPreferences'));

    if (userPreferences && userPreferences.performance.analytics) {
        // Activer Google Analytics seulement si l'utilisateur a accepté les cookies d'analyse
        (function() {
            var script = document.createElement('script');
            script.async = true;
            script.src = "https://www.googletagmanager.com/gtag/js?id=UA-XXXXX-Y";
            document.head.appendChild(script);

            script.onload = function() {
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                gtag('config', 'UA-XXXXX-Y'); // Remplacez UA-XXXXX-Y par votre identifiant de suivi
            };
        })();
    }
});

function RefreshBack() {
  setTimeout(() => location.reload(), 2000);
}

    </script>
</body>
</html>